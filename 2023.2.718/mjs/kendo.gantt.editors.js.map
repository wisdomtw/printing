{"version":3,"file":"kendo.gantt.editors.js","names":["__meta__","id","name","category","description","depends","hidden","$","undefined$1","kendo","window","ui","Observable","Widget","encode","htmlEncode","extend","GRID_HEIGHT","ganttStyles","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","buttonDefaults","editField","editLabel","resourcesField","PopupEditor","init","element","options","fn","call","this","destroy","close","unbind","that","editable","container","data","popup","is","trigger","bind","editTask","task","plannedEditors","_createPopupEditor","fields","customFields","model","template","map","value","key","field","general","_fieldsGeneral","resources","dependencies","_fieldsDependencies","Object","keys","GanttTask","length","other","_fieldsOther","showDialog","buttonsEl","popupStyles","wrapper","dialogEl","format","uid","appendTo","messages","append","text","kendoButton","themeColor","icon","click","e","preventDefault","callback","cancel","kendoWindow","modal","autoFocus","resizable","draggable","title","visible","deactivate","getKendoWindow","center","open","find","_buildButtons","save","_onSave","_onCancel","fillMode","_onDelete","_buildEditTemplate","settings","Template","templateSettings","html","unescape","renderForm","editableWidget","attr","width","editor","editorTitle","actions","userTriggered","_initForm","kendoEditable","clearContainer","validateOnBlur","target","cycleForm","nameDdlDs","dataSource","filter","i","typeDs","fullData","excluded","ddlData","modelFields","startText","actualStart","start","endText","actualEnd","end","colSpan","push","plannedStart","validation","editorOptions","componentType","plannedEnd","taskAllChildren","n","some","percentComplete","hint","percentCompleteHint","parent","optionLabel","parentOptionLabel","enable","dataValueField","dataTextField","valuePrimitive","toString","item","label","_readonlyEditor","_gridOptions","type","keyType","taskId","dependencyData","view","d","schema","from","required","defaultValue","columns","selectable","values","dependencyType","toolbar","addNew","remove","grid","closest","getKendoGrid","ds","selected","select","items","each","row","dataItem","sortable","navigatable","height","edit","setOptions","resourceField","get","tabStripDs","_tabStripSource","kendoTabStrip","dataContentField","tabStrip","sender","contentElement","index","validatable","validate","validator","_initGeneral","resourceEditor","kendoGrid","_initOther","kendoForm","layout","cols","gutter","rows","formData","buttonsTemplate","Date","found","prevData","newData","updateInfo","predeGrid","sucGrid","args","createdData","updatedData","successorId","concat","predecessorId","toJSON","dirty","updateDependencies","destroyed","created","updated","val","Array","isArray","updateModel","content","predecessors","successors","ResourceEditor","_resourceGrid","ddlDs","Grid","resourcesHeader","unitsHeader","valueFormat","filterable","selectedKeyNames","unitsValidation","ddl","currentId","filters","r","f","operator","logic","gantt","jQuery","kendo$1"],"sources":["kendo.gantt.editors.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.popup.js';\nimport './kendo.window.js';\nimport './kendo.gantt.data.js';\nimport './kendo.grid.js';\nimport './kendo.datetimepicker.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\nimport './kendo.tabstrip.js';\n\nvar __meta__ = {\n    id: \"gantt.editors\",\n    name: \"GanttEditors\",\n    category: \"web\",\n    description: \"The Gantt component editors.\",\n    depends: [ \"data\", \"popup\", \"window\", \"gantt.data\", \"grid\", \"datetimepicker\", \"numerictextbox\", \"textbox\", \"form\", \"tabstrip\"],\n    hidden: true\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Observable = kendo.Observable,\n        Widget = ui.Widget,\n        encode = kendo.htmlEncode,\n        extend = $.extend,\n        PERCENTAGE_FORMAT = \"p0\",\n        GRID_HEIGHT = \"23em\",\n        TAB_HEIGHT = \"28em\",\n        STRING = \"string\";\n\n    var ganttStyles = {\n        buttonDelete: \"k-gantt-delete\",\n        buttonCancel: \"k-gantt-cancel\",\n        buttonSave: \"k-gantt-update\",\n        focused: \"k-focus\",\n        gridContent: \"k-grid-content\",\n        hovered: \"k-hover\",\n        item: \"k-item k-menu-item\",\n        popupWrapper: \"k-popup k-menu-popup\",\n        popupList: \"k-menu-group k-menu-group-md k-reset\",\n        popup: {\n            form: \"k-popup-edit-form\",\n            editForm: \"k-gantt-edit-form\",\n            formContainer: \"k-edit-form-container\",\n            resourcesFormContainer: \"k-resources-form-container\",\n            message: \"k-popup-message\",\n            buttonsContainer: \"k-edit-buttons k-actions\",\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            editField: \"k-edit-field\",\n            editLabel: \"k-edit-label\",\n            resourcesField: \"k-gantt-resources\"\n        },\n        primary: \"k-button-solid-primary\",\n        toolbar: {\n            appendButton: \"k-gantt-create\"\n        }\n    };\n\n    var PopupEditor = Observable.extend({\n        init: function(element, options) {\n            Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n        },\n\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.container.data(\"kendoWindow\").destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable && that.container.is(\":visible\")) {\n                that.trigger(\"close\", { window: that.container });\n                that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n            } else {\n                destroy();\n            }\n        },\n\n        editTask: function(task, plannedEditors) {\n            this.task = task;\n            this.plannedEditors = plannedEditors;\n            this.editable = this._createPopupEditor();\n        },\n\n        fields: function() {\n            var options = this.options,\n                model = this.task,\n                fields = {},\n                customFields;\n\n            if (options.editable.template) {\n                return $.map(model.fields, function(value, key) {\n                    return { field: key };\n                });\n            } else {\n                fields.general = this._fieldsGeneral();\n\n                if (options.resources) {\n                    fields.resources = [ { field: \"resources\" } ];\n                }\n\n                if (options.dependencies) {\n                    fields.dependencies = this._fieldsDependencies(model);\n                }\n\n                customFields = extend(true, {}, model.fields);\n                Object.keys(kendo.data.GanttTask.fields).map(key => {\n                    delete customFields[key];\n                });\n\n                if (Object.keys(customFields).length > 0) {\n                    fields.other = this._fieldsOther(customFields);\n                }\n            }\n\n            return fields;\n        },\n\n\n        showDialog: function(options) {\n            var popupStyles = ganttStyles.popup,\n                wrapper = this.element,\n                task = options.model,\n                that = this,\n                dialogEl = $(kendo.format('<div class=\"' + popupStyles.formContainer + '\" data-uid=\"' + task.uid + '\">')).appendTo(wrapper),\n                messages = this.options.messages,\n                buttonsEl;\n\n            dialogEl.append($(\"<p>\" + options.text + \"</p>\"));\n            buttonsEl = $('<div class=\"' + popupStyles.buttonsContainer + '\">');\n            dialogEl.append(buttonsEl);\n\n            buttonsEl.append($(\"<button class='\" + ganttStyles.buttonDelete + \"'>\" + encode(messages.destroy) + \"</button>\").kendoButton({\n                name: \"delete\",\n                themeColor: \"primary\",\n                icon: \"trash\",\n                click: (e) => {\n                    e.preventDefault();\n                    popup.close();\n                    options.callback();\n                }\n            }));\n\n            buttonsEl.append($(\"<button class='\" + ganttStyles.buttonCancel + \"'>\" + encode(messages.cancel) + \"</button>\").kendoButton({\n                name: \"cancel\",\n                icon: \"cancel\",\n                click: (e) => {\n                    e.preventDefault();\n                    popup.close();\n                    options.callback(true);\n                }\n            }));\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = dialogEl.kendoWindow({\n                modal: true,\n                autoFocus: false,\n                resizable: false,\n                draggable: false,\n                title: options.title,\n                visible: false,\n                deactivate: function() {\n                    this.destroy();\n                    that.trigger(\"close\", { window: dialogEl });\n                }\n            })\n            .getKendoWindow();\n\n            popup.center().open();\n\n            popup.element.find(\".k-button-solid-primary\").trigger(\"focus\");\n        },\n\n        _buildButtons: function(dialogEl) {\n            var messages = this.options.messages,\n                buttonsEl = $('<div class=\"' + ganttStyles.popup.buttonsContainer + '\">');\n\n            buttonsEl.appendTo(dialogEl);\n\n            buttonsEl.append($(\"<button class='\" + ganttStyles.buttonSave + \"'>\" + encode(messages.save) + \"</button>\").kendoButton({\n                name: \"update\",\n                themeColor: \"primary\",\n                icon: \"save\",\n                click: this._onSave.bind(this)\n            }));\n            buttonsEl.append($(\"<button class='\" + ganttStyles.buttonCancel + \"'>\" + encode(messages.cancel) + \"</button>\").kendoButton({\n                name: \"cancel\",\n                icon: \"cancel\",\n                click: this._onCancel.bind(this)\n            }));\n            buttonsEl.append($(\"<span class='k-spacer'>\"));\n\n            if (this.options.editable.destroy !== false) {\n                buttonsEl.append($(\"<button class='\" + ganttStyles.buttonDelete + \"'>\" + encode(messages.destroy) + \"</button>\").kendoButton({\n                    name: \"delete\",\n                    themeColor: \"primary\",\n                    icon: \"trash\",\n                    fillMode: \"flat\",\n                    click: this._onDelete.bind(this)\n                }));\n            }\n        },\n\n        _buildEditTemplate: function(model, dialogEl) {\n            var template = this.options.editable.template;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n            } else {\n                this.renderForm = true;\n                html += '<div role=\"form\" class=\"k-gantt-edit-tabstrip\" style=\"min-height:' + TAB_HEIGHT + '\"></div>';\n            }\n\n            var formEl = $(html);\n            formEl.appendTo(dialogEl);\n        },\n\n        _createPopupEditor: function() {\n            var that = this;\n            var options = {};\n            var messages = this.options.messages;\n            var popupStyles = ganttStyles.popup;\n            var editableWidget;\n            var task = this.task;\n            var container = $(kendo.format('<div {0}=\"{1}\" class=\"{2} {3}\">', kendo.attr(\"uid\"), task.uid, popupStyles.form, popupStyles.editForm));\n\n            container.appendTo(this.element);\n\n            this._buildEditTemplate(task, container);\n            this._buildButtons(container);\n\n            this.container = container.kendoWindow(extend({\n                width: 554,\n                modal: true,\n                resizable: false,\n                draggable: true,\n                title: messages.editor.editorTitle,\n                visible: false,\n                actions: [ \"Minimize\", \"Maximize\", \"Close\" ],\n                close: function(e) {\n                    if (e.userTriggered) {\n                        if (that.trigger(\"cancel\", { container: container, model: task })) {\n                            e.preventDefault();\n                        }\n                    }\n                }\n            }, options));\n\n            if (this.renderForm) {\n                editableWidget = this._initForm();\n            } else {\n                editableWidget = container.kendoEditable({\n                    model: task,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                })\n                .data(\"kendoEditable\");\n            }\n\n            kendo.cycleForm(container);\n\n            if (!this.trigger(\"edit\", { container: container, model: task })) {\n                container.data(\"kendoWindow\").center().open();\n            } else {\n                that.trigger(\"cancel\", { container: container, model: task });\n            }\n\n            return editableWidget;\n        },\n\n        _fieldsDependencies: function(model) {\n            var options = this.options,\n                ds = options.target.dataSource,\n                nameDdlDs = ds.data().filter(i => i.id !== model.id).map(i => ({ text: i.title, value: i.id })),\n                typeDs = [\n                    { value: 0, text: \"Finish-Finish\" },\n                    { value: 1, text: \"Finish-Start\" },\n                    { value: 2, text: \"Start-Finish\" },\n                    { value: 3, text: \"Start-Start\" }\n                ];\n\n            return {\n                nameDdlDs, typeDs\n            };\n        },\n\n        _fieldsGeneral: function() {\n            var that = this,\n                options = this.options,\n                dataSource = options.target.dataSource,\n                messages = options.messages.editor,\n                task = this.task,\n                modelFields = task.fields,\n                startText = this.plannedEditors ? messages.actualStart : messages.start,\n                endText = this.plannedEditors ? messages.actualEnd : messages.end,\n                fullData, excluded, ddlData;\n\n            var general = [\n                { field: \"title\", title: messages.title, colSpan: 4 }\n            ];\n\n            if (this.plannedEditors) {\n                general.push({\n                    field: \"plannedStart\",\n                    title: messages.plannedStart,\n                    colSpan: 2,\n                    editor: \"DateTimePicker\",\n                    validation: modelFields.plannedStart.validation,\n                    editorOptions: {\n                        componentType: \"modern\"\n                    }\n                });\n\n                general.push({\n                    field: \"plannedEnd\",\n                    title: messages.plannedEnd,\n                    colSpan: 2,\n                    editor: \"DateTimePicker\",\n                    validation: modelFields.plannedEnd.validation,\n                    editorOptions: {\n                        componentType: \"modern\"\n                    }\n                });\n            }\n\n            fullData = dataSource.data();\n            excluded = dataSource.taskAllChildren(task);\n            excluded.push(task);\n            ddlData = fullData.filter(n => !excluded.some(e => e.id === n.id));\n\n            general.push({\n                field: \"start\",\n                title: startText,\n                colSpan: 2,\n                editor: \"DateTimePicker\",\n                validation: modelFields.start.validation,\n                editorOptions: {\n                    componentType: \"modern\"\n                }\n            });\n            general.push({\n                field: \"end\",\n                title: endText,\n                colSpan: 2,\n                editor: \"DateTimePicker\",\n                validation: modelFields.start.validation,\n                editorOptions: {\n                    componentType: \"modern\"\n                }\n            });\n            general.push({\n                field: \"percentComplete\",\n                title: messages.percentComplete,\n                format: PERCENTAGE_FORMAT,\n                colSpan: 1,\n                hint: messages.percentCompleteHint\n            });\n            general.push({\n                field: \"parentId\",\n                title: messages.parent,\n                colSpan: 4,\n                editor: \"DropDownList\",\n                editorOptions: {\n                    optionLabel: messages.parentOptionLabel,\n                    filter: \"contains\",\n                    dataSource: ddlData,\n                    enable: ddlData.length > 0,\n                    dataValueField: \"id\",\n                    dataTextField: \"title\",\n                    valuePrimitive: true,\n                    template: ({ title, start, end }) => `<span>${title} ${kendo.toString(start, \"d\")}-${kendo.toString(end, \"d\")}</span>`\n                }\n            });\n\n            general = general.map(function(item) {\n                item = extend(true, {\n                    label: item.title\n                }, item);\n\n                if (!task.editable || task.editable(item.field)) {\n                    return item;\n                } else {\n                    return extend(true, item, {\n                        editor: that._readonlyEditor.bind(that)\n                    });\n                }\n            });\n\n            return general;\n        },\n\n        _fieldsOther: function(other) {\n            var that = this,\n                task = this.task;\n\n            other = Object.keys(other).map(function(key) {\n                var item = other[key];\n\n                item = extend(true, {\n                    field: key,\n                    label: item.title\n                }, item);\n\n                if (!task.editable || task.editable(item.field)) {\n                    return item;\n                } else {\n                    return extend(true, item, {\n                        editor: that._readonlyEditor.bind(that)\n                    });\n                }\n            });\n\n            return other;\n        },\n\n        _gridOptions: function(dependencies, type, keyType, taskId) {\n            var messages = this.options.messages,\n                data;\n\n            if (!this.dependencyData) {\n                this.dependencyData = {};\n            }\n\n            data = this.dependencyData[type] = this.options.target.dependencies.view().filter(d => d[keyType] === taskId);\n\n            return {\n                dataSource: {\n                    data: data,\n                    schema: {\n                        model: {\n                            fields: {\n                                id: { from: \"id\" },\n                                [type]: { from: type, validation: { required: { message: messages.editor.name + \" is required\" } } },\n                                type: { from: \"type\", validation: { required: true }, defaultValue: 1 }\n                            }\n                        }\n                    }\n                },\n                columns: [{\n                    selectable: true,\n                    width: 50\n                },{\n                    field: type,\n                    title: messages.editor.name,\n                    values: dependencies.nameDdlDs\n                }, {\n                    field: \"type\",\n                    title: messages.editor.dependencyType,\n                    values: dependencies.typeDs,\n                    width: \"9em\"\n                }],\n                toolbar: [{\n                    name: \"create\",\n                    text: messages.editor.addNew\n                },{\n                    name: \"remove\",\n                    icon: \"minus\",\n                    text: messages.editor.remove,\n                    click: (e) => {\n                        var grid = e.target.closest(\".k-grid\").getKendoGrid(),\n                            ds = grid.dataSource,\n                            selected = grid.select(),\n                            items = [];\n\n                        if (selected && selected.length > 0) {\n                            selected.each((i, row) => {\n                                items.push(grid.dataItem($(row)));\n                            });\n\n                            items.map(i => {\n                                ds.remove(i);\n                            });\n                        }\n                    }\n                }],\n                editable: true,\n                sortable: true,\n                navigatable: true,\n                height: GRID_HEIGHT,\n                edit: function() {\n                    var select = $(\"[name=predecessorId], [name=successorId]\"),\n                        ddl;\n\n                    if (select.length) {\n                        ddl = select.data(\"kendoDropDownList\");\n                        ddl.setOptions({\n                            filter: \"contains\"\n                        });\n                    }\n                },\n            };\n        },\n\n        _initForm: function() {\n            var that = this,\n                task = that.task,\n                container = that.container,\n                resources = that.options.resources,\n                resourceField = task.get(resources.field),\n                fields = that.fields(),\n                tabStripDs = that._tabStripSource(fields, resourceField);\n\n            container.find(\".k-gantt-edit-tabstrip\").kendoTabStrip({\n                dataTextField: \"name\",\n                dataContentField: \"content\",\n                dataSource: tabStripDs,\n                value: that.options.messages.editor.general,\n                select: (e) => {\n                    var tabStrip = e.sender,\n                        contentElement = $(tabStrip.contentElement(tabStrip.select().index())),\n                        grid = contentElement.find(\".k-grid\").data(\"kendoGrid\"),\n                        form = contentElement.find(\".k-form\").data(\"kendoForm\");\n\n                    if (grid && grid.editable && grid.editable.validatable && !grid.editable.validatable.validate()) {\n                        e.preventDefault();\n                    } else if (form && !form.validator.validate()) {\n                        e.preventDefault();\n                    }\n                }\n            });\n\n            that._initGeneral(fields.general, task);\n\n            if (resourceField) {\n                that.resourceEditor = resources.editor(container.find(\".k-gantt-resources\"), task);\n            }\n\n            if (fields.dependencies) {\n                container.find(\".k-gantt-predecessors\").kendoGrid(that._gridOptions(fields.dependencies, \"predecessorId\", \"successorId\", task.id));\n                container.find(\".k-gantt-successors\").kendoGrid(that._gridOptions(fields.dependencies, \"successorId\", \"predecessorId\", task.id));\n            }\n\n            if (fields.other) {\n                that._initOther(fields.other, task);\n            }\n\n            return that.form.editable;\n        },\n\n        _initGeneral: function(items, task) {\n            this.form = this.container.find(\".k-gantt-form-default\").kendoForm({\n                layout: \"grid\",\n                grid: {\n                    cols: 4,\n                    gutter: {\n                        rows: 0,\n                        cols: 8\n                    }\n                },\n                items: items,\n                formData: task,\n                buttonsTemplate: () => \"\",\n                validatable: {\n                    validateOnBlur: true\n                }\n            }).data(\"kendoForm\");\n        },\n\n        _initOther: function(items, task) {\n            this.container.find(\".k-gantt-form-other\").kendoForm({\n                items: items,\n                formData: task,\n                buttonsTemplate: () => \"\",\n                validatable: {\n                    validateOnBlur: true\n                }\n            });\n        },\n\n        _readonlyEditor: function(container, options) {\n            var field = options.field,\n                value = '',\n                ds = this.options.target.dataSource;\n\n            if (options.model.get(field) !== null) {\n                value = options.model.get(field);\n\n                if (value instanceof Date) {\n                    value = kendo.toString(value, \"g\");\n                } else if (field === \"percentComplete\") {\n                    value = kendo.toString(value, options.format);\n                } else if (field === \"parentId\") {\n                    value = ds.get(value).title;\n                }\n            }\n\n            container.append(\"<span>\" + value + \"</span>\");\n        },\n\n        _onCancel: function() {\n            this.trigger(\"cancel\", { container: this.container, model: this.task });\n        },\n\n        _onDelete: function() {\n            this.trigger(\"remove\", { container: this.container, model: this.task });\n        },\n\n        _onSave: function() {\n            var task = this.task,\n                fields = [],\n                updateInfo = {},\n                field,\n                container = this.container,\n                predeGrid = container.find(\".k-gantt-predecessors\").getKendoGrid(),\n                sucGrid = container.find(\".k-gantt-successors\").getKendoGrid(),\n                found, prevData, newData, args = {}, createdData = [], updatedData = [];\n\n            if (predeGrid) {\n                prevData = this.dependencyData.successorId.concat(this.dependencyData.predecessorId);\n                newData = predeGrid.dataSource.view().toJSON().concat(sucGrid.dataSource.view().toJSON());\n\n                if (predeGrid && predeGrid.editable && predeGrid.editable.validatable && !predeGrid.editable.validatable.validate() ||\n                    sucGrid && sucGrid.editable && sucGrid.editable.validatable && !sucGrid.editable.validatable.validate()) {\n                        return;\n                    }\n\n                newData.map(n => {\n                    found = prevData.find(i => i.id === n.id);\n\n                    if (found) {\n                        if (found.dirty) {\n                            updatedData.push(n);\n                        }\n\n                        newData = newData.filter(i => i.id !== n.id);\n                        prevData = prevData.filter(i => i.id !== n.id);\n                    }\n                });\n\n                newData.map(i => {\n                    if (i.successorId) {\n                        if (!i.predecessorId) {\n                            i.predecessorId = task.get(\"id\");\n                        }\n\n                        createdData.push(i);\n                    } else if (i.predecessorId) {\n                        if (!i.successorId) {\n                            i.successorId = task.get(\"id\");\n                        }\n\n                        createdData.push(i);\n                    }\n                });\n\n                if (createdData.length > 0 || prevData.length > 0 || updatedData.length > 0) {\n                    args.updateDependencies = {\n                        destroyed: prevData,\n                        created: createdData,\n                        updated: updatedData\n                    };\n                }\n            }\n\n            Object.values(this.fields()).map((val) => {\n                if (Array.isArray(val)) {\n                    fields.push(...val);\n                }\n            });\n\n            if (this.resourceEditor) {\n                if (!this.resourceEditor.updateModel()) {\n                    return;\n                }\n            }\n\n            for (var i = 0, length = fields.length; i < length; i++) {\n                field = fields[i].field;\n                updateInfo[field] = task.get(field);\n            }\n\n            this.trigger(\"save\", $.extend({}, args, {\n                container: container,\n                model: task,\n                updateInfo: updateInfo\n            }));\n        },\n\n        _tabStripSource: function(fields, resourceField) {\n            var messages = this.options.messages.editor,\n                dependencies = fields.dependencies,\n                tabStripDs = [{\n                    name: messages.general,\n                    content: \"<div class='k-gantt-form-default'></div>\"\n                }];\n\n            if (resourceField) {\n                tabStripDs.push({\n                    name: messages.resources,\n                    content: \"<div class='k-gantt-resources'></div>\"\n                });\n            }\n\n            if (dependencies) {\n                tabStripDs.push({\n                    name: messages.predecessors,\n                    content: \"<div class='k-gantt-predecessors'></div>\"\n                });\n                tabStripDs.push({\n                    name: messages.successors,\n                    content: \"<div class='k-gantt-successors'></div>\"\n                });\n            }\n\n            if (fields.other) {\n                tabStripDs.push({\n                    name: messages.other,\n                    content: \"<div class='k-gantt-form-other'></div>\"\n                });\n            }\n\n            return tabStripDs;\n        }\n    });\n    var ResourceEditor = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.wrapper = this.element;\n            this.model = this.options.model;\n            this.resourcesField = this.options.resourcesField;\n\n            this._resourceGrid();\n        },\n\n        destroy: function() {\n            this.grid = null;\n\n            Widget.fn.destroy.call(this);\n\n            this.element = this.wrapper = null;\n        },\n\n        updateModel: function() {\n            var resources = [];\n            var item, value;\n            var grid = this.grid;\n            var data = grid.dataSource.data();\n            var editable = grid.editable;\n\n            if (editable && editable.validatable && !editable.validatable.validate()) {\n                return false;\n            }\n\n            for (var i = 0, length = data.length; i < length; i++) {\n                item = data[i];\n                value = item.get(\"value\");\n\n                if (item.id !== undefined$1 && value !== null && value > 0) {\n                    resources.push(data[i]);\n                }\n            }\n\n            this.model[this.resourcesField] = resources;\n\n            return true;\n        },\n\n        _resourceGrid: function() {\n            var that = this;\n            var messages = this.options.messages;\n            var options = that.options;\n            var element = this.wrapper;\n            var ddlDs = options.resources;\n\n            that.grid = new kendo.ui.Grid(element, {\n                columns: [{\n                    selectable: true,\n                    width: 50\n                },{\n                    field: \"id\",\n                    title: messages.resourcesHeader,\n                    values: ddlDs\n                },{\n                    field: \"value\",\n                    title: messages.unitsHeader,\n                    template: function(dataItem) {\n                        var valueFormat = dataItem.format || PERCENTAGE_FORMAT;\n                        var value = dataItem.value !== null ? dataItem.value : \"\";\n\n                        return valueFormat ? kendo.toString(value, valueFormat) : value;\n                    },\n                    width: 120\n                }],\n                height: GRID_HEIGHT,\n                sortable: true,\n                editable: true,\n                filterable: true,\n                navigatable: true,\n                toolbar: [{\n                    name: \"create\",\n                    text: messages.addNew\n                },{\n                    name: \"remove\",\n                    icon: \"minus\",\n                    text: messages.remove,\n                    click: () => {\n                        var grid = that.grid,\n                            ds = grid.dataSource,\n                            selected = grid.selectedKeyNames();\n\n                        if (selected && selected.length > 0) {\n                            selected.map(i => {\n                                ds.remove(ds.get(i));\n                            });\n                        }\n                    }\n                }],\n                dataSource: {\n                    data: this.model.resources,\n                    schema: {\n                        model: {\n                            id: \"id\",\n                            fields: {\n                                id: { from: \"id\", defaultValue: undefined$1, validation: { required: { message: messages.resourcesHeader + \" is required\" } } },\n                                value: { from: \"value\", type: \"number\", defaultValue: 1, validation: this.options.unitsValidation },\n                                format: { from: \"format\", type: \"string\" }\n                            }\n                        }\n                    }\n                },\n                edit: function(e) {\n                    var select = e.container.find(\"select\"),\n                        ddl = select.data(\"kendoDropDownList\"),\n                        currentId = e.model.id,\n                        filterOut = options.model.resources.map(r => r.id).filter(r => r !== currentId),\n                        filters = filterOut.map(f => ({\n                            field: \"value\",\n                            operator: \"neq\",\n                            value: f\n                        }));\n\n                    if (ddl) {\n                        ddl.dataSource.filter({\n                            logic: \"and\",\n                            filters: filters\n                        });\n\n                        ddl.setOptions({\n                            filter: \"contains\"\n                        });\n                    }\n                }\n            });\n        }\n    });\n\n    kendo.gantt = {\n        PopupEditor: PopupEditor,\n        ResourceEditor: ResourceEditor\n    };\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}